!function(t){t.extend(t.ui,{feastaMultiDate:{version:"1.6.4"}}),t.fn.feastaMultiDate=function(e){function a(t,e){e||(e="picked"),t=o.call(this,t);for(var a=0;a<this.feastaMultiDate.dates[e].length;a++)if(!u.compareDates(this.feastaMultiDate.dates[e][a],t))return this.feastaMultiDate.dates[e].splice(a,1).pop()}function i(t,e){return e||(e="picked"),this.feastaMultiDate.dates[e].splice(t,1).pop()}function s(t,e,a){e||(e="picked"),t=o.call(this,t),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),u.gotDate.call(this,t,e)===!1&&(this.feastaMultiDate.dates[e].push(t),a||this.feastaMultiDate.dates[e].sort(u.compareDates))}function r(t){t||(t="picked"),this.feastaMultiDate.dates[t].sort(u.compareDates)}function o(t,e,a){return e||(e="object"),u.dateConvert.call(this,t,e,a)}var l=arguments,n=this,c=(new Date,new Date(0),{}),u={init:function(e){var a=t(this);this.feastaMultiDate.changed=!1;var i={beforeShow:function(t,e){this.feastaMultiDate.changed=!1,this.feastaMultiDate.originalBeforeShow&&this.feastaMultiDate.originalBeforeShow.call(this,t,e)},onSelect:function(e,a){var i=t(this);if(this.feastaMultiDate.changed=!0,e&&(i.feastaMultiDate("toggleDate",e),this.feastaMultiDate.changed=!0),"normal"==this.feastaMultiDate.mode&&this.feastaMultiDate.pickableRange)if(this.feastaMultiDate.dates.picked.length>0){var s=this.feastaMultiDate.dates.picked[0],r=new Date(s.getTime());if(u.sumDays(r,this.feastaMultiDate.pickableRange-1),this.feastaMultiDate.adjustRangeToDisabled){var o,l=this.feastaMultiDate.dates.disabled.slice(0);do{o=0;for(var n=0;n<l.length;n++)l[n].getTime()<=r.getTime()&&(s.getTime()<=l[n].getTime()&&l[n].getTime()<=r.getTime()&&o++,l.splice(n,1),n--);r.setDate(r.getDate()+o)}while(0!=o)}this.feastaMultiDate.maxDate&&r>this.feastaMultiDate.maxDate&&(r=this.feastaMultiDate.maxDate),i.datepicker("option","minDate",s).datepicker("option","maxDate",r)}else i.datepicker("option","minDate",this.feastaMultiDate.minDate).datepicker("option","maxDate",this.feastaMultiDate.maxDate);this.feastaMultiDate.originalOnSelect&&e&&this.feastaMultiDate.originalOnSelect.call(this,e,a)},beforeShowDay:function(e){var a=t(this),i=a.feastaMultiDate("gotDate",e)!==!1,s=a.datepicker("option","disabled"),r=a.feastaMultiDate("gotDate",e,"disabled")!==!1,o=this.feastaMultiDate.maxPicks<=this.feastaMultiDate.dates.picked.length,l=[!0,"",null];return this.feastaMultiDate.originalBeforeShowDay&&(l=this.feastaMultiDate.originalBeforeShowDay.call(this,e)),l[1]=i?"ui-state-highlight "+l[1]:l[1],l[0]=l[0]&&!(s||r||o&&!l[1]),l}};if(a.val())var s=a.val();e?(e.separator&&(this.feastaMultiDate.separator=e.separator),this.feastaMultiDate.separator||(this.feastaMultiDate.separator=", "),this.feastaMultiDate.originalBeforeShow=e.beforeShow,this.feastaMultiDate.originalOnSelect=e.onSelect,this.feastaMultiDate.originalBeforeShowDay=e.beforeShowDay,this.feastaMultiDate.originalOnClose=e.onClose,a.datepicker(e),this.feastaMultiDate.minDate=t.datepicker._determineDate(this,e.minDate,null),this.feastaMultiDate.maxDate=t.datepicker._determineDate(this,e.maxDate,null),e.addDates&&u.addDates.call(this,e.addDates),e.addDisabledDates&&u.addDates.call(this,e.addDisabledDates,"disabled"),u.setMode.call(this,e)):a.datepicker(),a.datepicker("option",i),s&&a.feastaMultiDate("value",s);var r=a.feastaMultiDate("value");a.val(r);var o=a.datepicker("option","altField");o&&t(o).val(r),a.datepicker("refresh")},compareDates:function(t,e){t=o.call(this,t),e=o.call(this,e);var a=t.getFullYear()-e.getFullYear();return a||(a=t.getMonth()-e.getMonth(),a||(a=t.getDate()-e.getDate())),a},sumDays:function(t,e){var a=typeof t;return obj_date=o.call(this,t),obj_date.setDate(obj_date.getDate()+e),o.call(this,obj_date,a)},dateConvert:function(e,a,i){var s=typeof e,r=t(this);if(s==a){if("object"==s)try{e.getTime()}catch(o){return t.error("Received date is in a non supported format!"),!1}return e}if("undefined"==typeof e&&(e=new Date(0)),"string"!=a&&"object"!=a&&"number"!=a&&t.error('Date format "'+a+'" not supported!'),!i){var l=r.datepicker("option","dateFormat");i=l?l:t.datepicker._defaults.dateFormat}switch(s){case"object":break;case"string":e=t.datepicker.parseDate(i,e);break;case"number":e=new Date(e);break;default:t.error('Conversion from "'+a+'" format not allowed on jQuery.feastaMultiDate')}switch(a){case"object":return e;case"string":return t.datepicker.formatDate(i,e);case"number":return e.getTime();default:t.error('Conversion to "'+a+'" format not allowed on jQuery.feastaMultiDate')}return!1},gotDate:function(t,e){e||(e="picked");for(var a=0;a<this.feastaMultiDate.dates[e].length;a++)if(0===u.compareDates.call(this,this.feastaMultiDate.dates[e][a],t))return a;return!1},value:function(t){if(!t||"string"!=typeof t){var e=u.getDates.call(this,"string");return e.length?e.join(this.feastaMultiDate.separator):""}u.addDates.call(this,t.split(this.feastaMultiDate.separator))},getDates:function(e,a){switch(e||(e="string"),a||(a="picked"),e){case"object":return this.feastaMultiDate.dates[a];case"string":case"number":var i=new Array;for(var s in this.feastaMultiDate.dates[a])i.push(o.call(this,this.feastaMultiDate.dates[a][s],e));return i;default:t.error('Format "'+e+'" not supported!')}},addDates:function(e,a){if(e.length>0)switch(a||(a="picked"),typeof e){case"object":case"array":if(e.length){for(var i=0;i<e.length;i++)s.call(this,e[i],a,!0);r.call(this,a);break}case"string":case"number":s.call(this,e,a);break;default:t.error('Date format "'+typeof e+'" not allowed on jQuery.feastaMultiDate')}else t.error("Empty array of dates received.")},removeDates:function(t,e){e||(e="picked");var i=[];if("[object Array]"===Object.prototype.toString.call(t))for(var s in t.sort(function(t,e){return e-t}))i.push(a.call(this,t[s],e));else i.push(a.call(this,t,e));return i},removeIndexes:function(t,e){e||(e="picked");var a=[];if("[object Array]"===Object.prototype.toString.call(t))for(var s in t.sort(function(t,e){return e-t}))a.push(i.call(this,t[s],e));else a.push(i.call(this,t,e));return a},resetDates:function(t){t||(t="picked"),this.feastaMultiDate.dates[t]=[]},toggleDate:function(t,e){switch(e||(e="picked"),this.feastaMultiDate.mode){case"daysRange":this.feastaMultiDate.dates[e]=[];var a=this.feastaMultiDate.autoselectRange[1],i=this.feastaMultiDate.autoselectRange[0];i>a&&(a=this.feastaMultiDate.autoselectRange[0],i=this.feastaMultiDate.autoselectRange[1]);for(var s=i;a>s;s++)u.addDates.call(this,u.sumDays.call(this,t,s),e);break;default:u.gotDate.call(this,t)===!1?u.addDates.call(this,t,e):u.removeDates.call(this,t,e)}},setMode:function(e){t(this);switch(e.mode&&(this.feastaMultiDate.mode=e.mode),this.feastaMultiDate.mode){case"normal":for(option in e)switch(option){case"maxPicks":case"minPicks":case"pickableRange":case"adjustRangeToDisabled":this.feastaMultiDate[option]=e[option]}break;case"daysRange":case"weeksRange":var a=1;for(option in e)switch(option){case"autoselectRange":a--;case"pickableRange":case"adjustRangeToDisabled":this.feastaMultiDate[option]=e[option]}a>0&&t.error("Some mandatory options not specified!")}c.onSelect&&c.onSelect()},destroy:function(){this.feastaMultiDate=null,t(this).datepicker("destroy")}};return this.each(function(){var a=t(this);if(this.feastaMultiDate||(this.feastaMultiDate={dates:{picked:[],disabled:[]},mode:"normal",adjustRangeToDisabled:!0}),u[e]){var i=u[e].apply(this,Array.prototype.slice.call(l,1));switch(e){case"removeDates":case"removeIndexes":case"resetDates":case"toggleDate":case"addDates":var s=a.datepicker("option","altField"),r=u.value.call(this);void 0!==s&&""!=s&&t(s).val(r),a.val(r),t.datepicker._refreshDatepicker(this)}switch(e){case"removeDates":case"getDates":case"gotDate":case"sumDays":case"compareDates":case"dateConvert":case"value":n=i}return i}return"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.feastaMultiDate"),!1):u.init.apply(this,l)}),n};var e=(new Date).getTime();t.feastaMultiDate={version:!1},t.feastaMultiDate.initialized=!1,t.feastaMultiDate.uuid=(new Date).getTime(),t.feastaMultiDate.version=t.ui.feastaMultiDate.version,t.feastaMultiDate._hideDatepicker=t.datepicker._hideDatepicker,t.datepicker._hideDatepicker=function(){var e=this._curInst.input[0],a=e.feastaMultiDate;return!a||this._curInst.inline===!1&&!a.changed?t.feastaMultiDate._hideDatepicker.apply(this,arguments):(a.changed=!1,void t.datepicker._refreshDatepicker(e))},window["DP_jQuery_"+e]=t}(jQuery);